
<%# <h2>{{ self.title() }}</h2> %>
<h2>Timeline</h2>
<% if logged_in? && @profile_user %>
  <div class=followstatus>
  <% if current_user.user_id == @profile_user.user_id %>
    This is you!
  <% elsif current_user.follows?(@profile_user) %>
    You are currently following this user.
    <a class=unfollow href="<%= "/#{@profile_user.username}/unfollow" %>">Unfollow user</a>.
  <% else %>
    You are not yet following this user.
    <a class=follow href="<%= "/#{@profile_user.username}/follow" %>">Follow user</a>.
  <% end %>
  </div>
<% elsif logged_in? %>
  <div class=twitbox>
    <h3>What's on your mind <%= current_user.username %>?</h3>
    <form action="/add_message" method=post>
      <p><input type=text name=text size=60>
      <input type=submit value="Share">
    </form>
  </div>
<% end %>
<ul class=messages>
<% @messages.each do |message| %>
  <li><img src="<%= message.author.gravatar(48)%>"><p>
  <strong><a href="<%= message.author.username %>"><%= message.author.username %></a></strong>
  <%= Rack::Utils.escape_html(message.text) %>
  <small>&mdash; <%= Time.at(message.pub_date) %></small>
<% end %>
<% if @messages.empty? %>
  <li><em>There's no message so far.</em>
<% end %>
</ul>
